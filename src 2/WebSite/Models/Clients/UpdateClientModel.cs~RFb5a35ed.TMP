using Dtos.Common;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Linq;
using WebSite.Models.Books;

namespace WebSite.Models.Clients
{
    public class UpdateClientModel
    {
        public int ClientId { get; set; }

        [Required(ErrorMessage = "El campo nombre es requerido")]
        [MinLength(5, ErrorMessage = "Longitud minima de 5")]
        public string Name { get; set; }
        public List<SelectBookModel> BookList { get; set; }

        [BindProperty]
        public List<int> BooksId { get; set; }


        protected void MarkSelectedBooks(List<BookDto> FullList, List<BookDto> AssingList)
        {
            var list = new List<SelectBookModel>();
            if (books == null || books?.Count() == 0)
                return;

            list = books.Select(b => new SelectBookModel
            {
                Book = b,
                Checked = ClientBooks != null && ClientBooks.Any(bk => bk.BookId == b.BookId) //Marcar los asignados
            }).ToList();

            this.BookList = list;
        }


    }
}
